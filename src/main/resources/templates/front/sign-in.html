<!doctype html>
<html>
	<head>
		<title>登录</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="keywords" content="Eminent Login Form Widget Responsive, Login form web template,Flat Pricing tables,Flat Drop downs  Sign up Web Templates, Flat Web Templates, Login signup Responsive web template, Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyEricsson, Motorola web design" />
		<script type="application/x-javascript">
			addEventListener("load", function() {
				setTimeout(hideURLbar, 0);
			}, false);

			function hideURLbar() {
				window.scrollTo(0, 1);
			}
		</script>
		<!-- font files -->
		<!--<link href='//fonts.googleapis.com/css?family=Raleway:400,100,200,300,500,600,700,800,900' rel='stylesheet' type='text/css'>-->
		<!--<link href='//fonts.googleapis.com/css?family=Poiret+One' rel='stylesheet' type='text/css'>-->
		<!-- /font files -->
		<!-- css files -->
		<link href="assets/css/signInStyle.css" rel='stylesheet' type='text/css' media="all" />
		<!-- /css files -->
	</head>
	<body>
		<h1>欢迎光临迪卢克斯酒店</h1>
		<div class="form-w3ls">
			<ul class="tab-group cl-effect-4">
				<li class="tab active"><a href="#signin-agile">登 录</a></li>
				<li class="tab"><a href="#signup-agile">注 册</a></li>
				<li class="tab"><a href="#forget-agile">忘记密码</a></li>
			</ul>
			<div class="tab-content">
				<div id="signin-agile">
					<form id="signInForm">

						<p class="header">用 户 名</p>
						<input type="text" name="username" value="用户名" onfocus="this.value = '';" onblur="if (this.value == '') {this.value = '用户名';}">

						<p class="header">密 码</p>
						<input type="password" name="password" value="" onfocus="this.value = '';" onblur="if (this.value == '') {this.value = '';}">
						
						<input type="checkbox" name="rememberUsername" id="rememberUsername" value="" />
						<label for="rememberUsername" style=" color:#FFFFFF"><span></span> 记住我?</label>
						
						<input type="button" onclick="signIn()"  class="sign-in" value="登&nbsp;&nbsp;&nbsp;录">

						<ul class="links">
							<li class="pass-w3ls"><a href="#">使用第三方登录 ？</a></li>
						</ul>
					</form>
				</div>
				<div id="signup-agile">
					<form id="signUpForm">

						<p class="header">用 户 名</p>
						<input type="text" id="username" name="username" value="用户名"  onfocus="this.value = '';"onblur="if (this.value == '') {this.value = '用户名';}" required>

						<p class="header">性 别</p>
						<div>
							<label style="float:left;width: 50%; color:#FFFFFF"  ><input name="gender" checked="checked" type="radio" value="1" />男 </label> 
							<label style="float:right;width: 50%; color:#FFFFFF"><input name="gender" type="radio" value="0" />女 </label> 
						</div>
						
						<p class="header">联 系 电 话</p>
						<input type="tel" name="telephone" value="联系电话" onfocus="this.value = '';" onblur="if (this.value == '') {this.value = '联系电话';}"required>
						
						<p class="header">身 份 证 号</p>
						<input type="tel" name="idCard" value="身份证号码" onfocus="this.value = '';" onblur="if (this.value == '') {this.value = '身份证号码';}" required>
						
						<p class="header">邮 箱 地 址</p>
						<input type="email" name="email" value="Email@address.com" onfocus="this.value = '';"  onblur="if (this.value == '') {this.value = 'Email@address.com';}"required>
						
						<p class="header">密 码</p>
						<input type="password" name="password"   required>

						<p class="header">确 认 密 码</p>
						<input type="password" name="confirmPassword" value="" required>

						<input type="button" onclick="signUp()" class="register" value="注&nbsp;&nbsp;&nbsp;册">
					</form>
				</div>
				<div id="forget-agile">
					<form id="resetPasswordForm">
				
						<p class="header">用 户 名</p>
						<input type="text" name="user" value="用户名" onfocus="this.value = '';" onblur="if (this.value == '') {this.value = '用户名e';}">
						
						<p class="header">邮 箱 地 址</p>
						<input type="email"  name="email" value="Email@address.com" onfocus="this.value = '';" onblur="if (this.value == '') {this.value = 'Email@address.com';}">
						<div>	
							<p class="header">验 证 码</p>
							<input type="text" style="width:70%;" name="verificationCode"  onfocus="this.value = '';"><button type="button" id="verification" onclick="sendVerificationCode()">发送验证码</button>
						</div>
						
						<p class="header">请 输 入 新 密 码</p>
						<input type="password" name="password" value="" onfocus="this.value = '';" onblur="if (this.value == '') {this.value = '';}">
				
						<p class="header">请 确 认 新 密 码</p>
						<input type="password" name="confirmPassword" value="" onfocus="this.value = '';" onblur="if (this.value == '') {this.value = '';}">
				
						<input type="button" onclick="resetPassword()" class="forget" value="重置密码">
					</form>
				</div>
			</div><!-- tab-content -->
		</div> <!-- /form -->
		<p class="copyright">© 刘子源版权所有</p>
		<!-- js files -->
		<script src='assets/js/jquery.min.js'></script>
		<script src="assets/js/index.js"></script>
		<!-- bootbox.js -->
		<script type="text/javascript" src="assets/js/bootstrap.js"></script>
		<script type="text/javascript" src="assets/js/bootbox.js"></script>
		<!-- /js files -->
		<script type="text/javascript">
			function signIn(){
				$.post('dologin',$('#signInForm').serialize(),function(result){
					if(result.resultCode==2){
						alert(result.message);
						//$("#alertDiv").css({"display":"block"});
						//$("#alertDiv").html(result.message);
					}else if(result.resultCode==0){
						alert(result.message);
						//$("#alertDiv").css({"display":"block"});
						//$("#alertDiv").html(result.message);
					}else{
						window.location.href = "index.html";
					}
				})
			}
			function sendVerificationCode(){
				var user=$("#resetPasswordForm>input[name='user']").val();
				var email=$("#resetPasswordForm>input[name='email']").val();
				$.post("getVerificationCode",{user:user,email:email},function(result){
					if(result.resultCode==1){
						if (result.resultCode == 1) {
							alert(result.message);
						}
						if (result.resultCode == 2) {
							alert(result.message);
						}
						if (result.resultCode == 0) {
							alert(result.message);
						}
					}
				})
			}
			function resetPassword(){
				$.post("resetPassword",$("#resetPasswordForm").serialize(),function(result){
					if (result.resultCode == 1) {
						alert(result.message);
						setTimeout("location.href = 'signIn.html'",3000);//3000毫秒后跳转
					}
					if (result.resultCode == 2) {
						alert(result.message);
					}
					if (result.resultCode == 0) {
						alert(result.message);
					}
				})
			}
			
			$("#username").change(function () {
				var userName = signUpForm['username'].value;
				$.post("doname",{name:userName},function(result){
					if(result.resultCode==1){
						$("#username").css("color","green");
					}else{
						$("#username").css("color","red");
						/* var dialogInfo = bootbox.dialog({
		            	    message: '<p class="text-center mb-0"><i class="fa fa-spin fa-cog"></i>'+result.message+'</p>',
		            	    closeButton: false
		            	});
		            	setTimeout(function(){ dialogInfo.modal('hide'); },1200); */
						$("#username").val("");
					}
				})
			});
			
			function check() {
				var name = document.getElementById("username").value;
				if (name == '' || name == 'Your Full Name') {
					alert("用户名不能为空!");
					return false;
				}
				if (signUpForm['telephone'].value == ''
						|| signUpForm['telephone'].value == 'Your Phone Number') {
					alert("联系电话不能为空!");
					return false;
				}
				if (signUpForm['idCard'].value == ''
						|| signUpForm['idCard'].value == 'Your ID Card Number') {
					alert("身份证号不能为空!");
					return false;
				}
				if (signUpForm['email'].value == ''
						|| signUpForm['email'].value == 'Email@address.com') {
					alert("邮箱地址不能为空!");
					return false;
				}
				if (signUpForm['password'].value == '') {
					alert("密码不能为空!");
					return false;
				}
				return true;
			}
			function signUp() {
				if (check()) {
					if (signUpForm['password'].value == signUpForm['confirmPassword'].value) {
						$.post("doreg", $("#signUpForm").serialize(), function(
								result) {
							if (result.resultCode == 1) {
								alert("成功")
								/* var dialogInfo = bootbox.dialog({
								    message: '<p class="text-center mb-0"><i class="fa fa-spin fa-cog"></i>'+result.message+'</p>',
								    closeButton: false
								});
								setTimeout(function(){ dialogInfo.modal('hide'); },1200);
								$("#roomTypeTable").bootstrapTable('refresh'); */
							} else {
								alert("失败")
								/* var dialogInfo = bootbox.dialog({
								    message: '<p class="text-center mb-0"><i class="fa fa-spin fa-cog"></i>'+result.message+'</p>',
								    closeButton: false
								});
								setTimeout(function(){ dialogInfo.modal('hide'); },1200); */
							}
						});
					} else {
						alert("两次密码输入不一致")
					}
				}

			}
		</script>
	</body>
</html>
